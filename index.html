<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Villa Johanna after renovation in 2023</title>
  <link rel="stylesheet" href="pannellum.css"/>
  <script type="text/javascript" src="pannellum.js"></script>
  <style>
    #rooms {
      position: absolute;
      top: 0px;
      left: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div id="panorama"></div>
  <div id="rooms">
    <p>
    <img src="./img/outside.jpeg" width="230px" height=auto/> </p> <!-- TODO New Pic -->
  </div>
<script>

  function get(name){
    if(name=(new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)')).exec(location.search))
      return decodeURIComponent(name[1]);
    else
      return "entrance"; // default scene
  }

  let startScene = get("start");

  let scenes = {
    "default": {
      "firstScene": startScene,
      "title": "Villa Johanna, Bad Herrenalb, Germany",
      "author": "Villa Johanna",
      "sceneFadeDuration": 1000,
      "autoLoad" : true,
      "autoRotate" : -3,
      "autoRotateInactivityDelay" : 2000
    },

    "scenes": {
      "entrance": {
        "title": "Entrance",
        "hfov": 110,
        "pitch": -3,
        "yaw": 117,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230124_180548_419.jpeg",
        "hotSpots": [
          {
            "pitch": -2.1,
            "yaw": 90,
            "type": "scene",
            "text": "Schlafzimmer 1",
            "sceneId": "bedroom1"
          },
          {
            "pitch": -3,
            "yaw": 270,
            "type": "scene",
            "text": "Flur",
            "sceneId": "flur",
            "targetYaw": 30,
            "targetPitch": 15
          },
          {
            "pitch": 20,
            "yaw": 180,
            "type": "scene",
            "text": "Obergeschoss",
            "sceneId": "OG",
            "targetYaw": 30,
            "targetPitch": 15
          },

          {
            "pitch": -10,
            "yaw": 155,
            "type": "scene",
            "text": "Wellness",
            "sceneId": "welnness"
          }
        ]
      },

      "bedroom1": {
        "title": "Schlafzimmer 1",
        "hfov": 110,
        "yaw": 300,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135346_00_043.jpg",
        "hotSpots": [
          {
            "pitch": -3,
            "yaw": 37.1,
            "type": "scene",
            "text": "Eingang",
            "sceneId": "entrance",
            "targetYaw": 110,
            "targetPitch": -3
          }
        ]
      },

      // img/IMG_20230124_180541_896.jpeg

      "flur": {
        "title": "Flur EG",
        "hfov": 110,
        "yaw": 5,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230124_180541_896.jpeg",
        "hotSpots": [
          {
            "pitch": -3,
            "yaw": 180,
            "type": "scene",
            "text": "Eingang",
            "sceneId": "entrance",
            "targetYaw": 110,
            "targetPitch": -3
          },
          {
            "pitch": -3,
            "yaw": 300,
            "type": "scene",
            "text": "Küche",
            "sceneId": "kueche",
            "targetYaw": 0,
            "targetPitch": -3
          },
          {
            "pitch": -3,
            "yaw": 70,
            "type": "scene",
            "text": "Esszimmer",
            "sceneId": "esszimmer",
            "targetYaw": 210,
            "targetPitch": -3
          },
          {
            "pitch": -3,
            "yaw": 5,
            "type": "scene",
            "text": "Bad",
            "sceneId": "dusche_EG",
            "targetYaw": 130,
            "targetPitch": -3
          }
        ]
      },

      // img/IMG_20230124_180535_749.jpeg

      "kueche": {
        "title": "Küche",
        "hfov": 110,
        "yaw": 5,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135431_00_044.jpg",
        "hotSpots": [
          {
            "pitch": -3,
            "yaw": 300,
            "type": "scene",
            "text": "Flur",
            "sceneId": "flur",
            "targetYaw": 190,
            "targetPitch": -3
          }
        ]
      },

      // img/IMG_20230124_180522_219.jpeg

      "esszimmer": {
        "title": "Esszimmer",
        "hfov": 110,
        "yaw": 50,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135537_00_047.jpg",
        "hotSpots": [
          {
            pitch: -3,
            yaw: 270,
            type: "scene",
            text: "Flur",
            "sceneId": "flur",
            "targetYaw": 300,
            "targetPitch": -3
          },

          {
            "pitch": 0,
            "yaw": 175,
            "type": "scene",
            "text": "Wohnzimmer",
            "sceneId": "wohnzimmer",
          //  "targetYaw": 210,
          //  "targetPitch": 10
          }
        ]
      },

      // img/IMG_20230124_180529_183.jpeg

      "wohnzimmer": {
        "title": "Wohnzimmer",
        "hfov": 210,
        "yaw": 30,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135620_00_049.jpg",
        "hotSpots": [
          {
            "pitch": -3,
            "yaw": 0,
            "type": "scene",
            "text": "Esszimmer",
            "sceneId": "esszimmer",
          //  "targetYaw": 300,
          //  "targetPitch": -3
          }
        ]
      },

      // img/IMG_20230124_180514_940.jpeg

      "dusche_EG": {
        "title": "Dusche",
        "hfov": 210,
        "yaw": 130,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135452_00_045.jpg",
        "hotSpots": [
          {
            "pitch": 0,
            "yaw": 260,
            "type": "scene",
            "text": "Flur",
            "sceneId": "flur",
            "targetYaw": 300,
            "targetPitch": -3
          }
        ]
      },

      // img/IMG_20230124_180500_684.jpeg

      "OG": {
        "title": "Obergeschoss",
        "hfov": 400,
        "pitch": 0,
        "yaw": 170,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135747_00_051.jpg",
        "hotSpots": [
          {
            "yaw": 0,
            "pitch" : -25,
            "type": "scene",
            "text": "Erdgeschoss",
            "sceneId": "entrance",
            "targetYaw": 300,
            "targetPitch": -3
          }, {
            "yaw": 17,
            "type": "scene",
            "text": "Dachgeschoss",
            "sceneId": "top",
            "targetYaw": 80,
            "targetPitch": 10
          }, {
            "yaw": 43,
            "type": "scene",
            "text": "Bad",
            "sceneId": "bath",
            "targetYaw": 300,
            "targetPitch": -3
          },
          {
            "yaw": 325,
            "type": "scene",
            "text": "Schlafzimmer 3",
            "sceneId": "bedroom3",
            //"targetYaw": 300,
            //"targetPitch": -3
          },
          {
            "yaw": 290,
            "type": "scene",
            "text": "Schlafzimmer 4",
            "sceneId": "bedroom4",
            //"targetYaw": 300,
            //"targetPitch": -3
          },
          {
            "yaw": 83,
            "type": "scene",
            "text": "Schlafzimmer 2",
            "sceneId": "bedroom2",
            "targetYaw": 180,
            "targetPitch": -10
          }
        ]
      },

      // img/IMG_20230124_180453_588.jpeg

      "bedroom3": {
        "title": "Schlafzimmer 3",
        "hfov": 300,
        "pitch": 0,
        "yaw": 180,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140444_00_061.jpg",
        "hotSpots": [
          {
            "yaw": 130,
            "type": "scene",
            "text": "Obergeschoss",
            "sceneId": "OG",
            "targetYaw": 270,
            "targetPitch": 0
          }
        ]
      },

      // img/IMG_20230124_180446_757.jpeg

      "bedroom4": {
        "title": "Schlafzimmer 4",
        "hfov": 300,
        "pitch": 0,
        "yaw": 0,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135850_00_053.jpg",
        "hotSpots": [
          {
            "yaw": 270,
            "type": "scene",
            "text": "Obergeschoss",
            "sceneId": "OG",
            "targetYaw": 90,
            "targetPitch": 0
          }
        ]
      },

      // img/IMG_20230124_180433_228.jpeg

      "bedroom2": {
        "title": "Schlafzimmer 2",
        "hfov": 300,
        "pitch": 0,
        "yaw": 180,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135812_00_052.jpg",
        "hotSpots": [
          {
            "yaw": 270,
            "type": "scene",
            "text": "Obergeschoss",
            "sceneId": "OG",
            "targetYaw": 300,
            "targetPitch": -3
          }
        ]
      },

      // img/IMG_20230124_180400_837.jpeg

      "bath": {
        "title": "Badezimmer Badewanne",
        "hfov": 300,
        "pitch": 0,
        "yaw": -20,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135920_00_054.jpg",
        "hotSpots": [
          {
            "yaw": -70,
            "type": "scene",
            "text": "Obergeschoss",
            "sceneId": "OG",
            "targetYaw": 300,
            "targetPitch": -3
          },
          {
            "yaw": 220,
            "type": "scene",
            "text": "Waschbecken",
            "sceneId": "bath2",
          }
        ]
      },


      "bath2": {
        "title": "Badezimmer Waschbecken",
        "hfov": 300,
        "pitch": 0,
        "yaw": 190,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_135935_00_055.jpg",
        "hotSpots": [
          {
            "yaw": 255,
            "type": "scene",
            "text": "Obergeschoss",
            "sceneId": "OG",
          },
          {
            "yaw": 275,
            "type": "scene",
            "text": "Badewanne",
            "sceneId": "bath",
          }
        ]
      },


      // img/IMG_20230124_180354_657.jpeg

      "top": {
        "title": "Dachgeschoss",
        "hfov": 300,
        "pitch": -10,
        "yaw": 180,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140149_00_057.jpg",
        "hotSpots": [
          {
            "yaw": 5,
            "pitch": -35,
            "type": "scene",
            "text": "Obergeschoss",
            "sceneId": "OG",
            "targetYaw": 300,
            "targetPitch": 10
          },
          {
            "yaw": 280,
            "type": "scene",
            "text": "Spielzimmer",
            "sceneId": "game",
            "targetYaw": 300,
            "targetPitch": -3
          }
        ]
      },

      // img/IMG_20230124_180348_637.jpeg
      "game": {
        "title": "Spielzimmer",
        "hfov": 300,
        "pitch": -5,
        "yaw": 180,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140215_00_058.jpg",
        "hotSpots": [
          {
            "yaw": 360,
            "pitch": -5,
            "type": "scene",
            "text": "Gallerie",
            "sceneId": "top",
            "targetYaw": 300,
            "targetPitch": 10
          }
        ]
      },

      // img/IMG_20230125_115406_014.jpeg
      "wellness": {
        "title": "Wellness and Fitness",
        "hfov": 300,
        "pitch": 0,
        "yaw": 110,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140731_00_063.jpg",
        "hotSpots": [
          {
            "yaw": 300,
            "pitch": -5,
            "type": "scene",
            "text": "Erdgeschoss",
            "sceneId": "entrance"
          },
          {
            "yaw": 20,
            "pitch": -15,
            "type": "scene",
            "text": "Fitness",
            "sceneId": "fitness"
          }, {
            "yaw": 190,
            "pitch": -5,
            "type": "scene",
            "text": "Sauna",
            "sceneId": "sauna"
          }, {
            "yaw": 100,
            "pitch": -5,
            "type": "scene",
            "text": "Terrasse",
            "sceneId": "terrace"
          }, {
            "yaw": 347,
            "pitch": -5,
            "type": "scene",
            "text": "Dusche Wellness",
            "sceneId": "saunashower"
          }

        ]
      },
      "saunashower": {
        "title": "Dusche Wellness",
        "hfov": 300,
        "pitch": 5,
        "yaw": 90,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140831_00_065.jpg",
        "hotSpots": [
          {
            "yaw": 10,
            "pitch": -5,
            "type": "scene",
            "text": "Fitness",
            "sceneId": "fitness"
          },

          {
            "yaw": 40,
            "pitch": -5,
            "type": "scene",
            "text": "Toilet Fitness",
            "sceneId": "wc_fitness"
          }
        ]
      },
      "wc_fitness": {
        "title": "Toilette Wellness",
        "hfov": 300,
        "pitch": 5,
        "yaw": 0,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140849_00_066.jpg",
        "hotSpots": [
          {
            "yaw": 250,
            "pitch": -5,
            "type": "scene",
            "text": "Fitness",
            "sceneId": "fitness"
          },
        ]
      },

      "sauna": {
        "title": "Sauna",
        "hfov": 300,
        "pitch": 0,
        "yaw": 230,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140639_00_062.jpg",
        "hotSpots": [
          {
            "yaw": 0,
            "pitch": -15,
            "type": "scene",
            "text": "Wellness",
            "sceneId": "wellness",
            "targetYaw": 300,
            "targetPitch": 10
          }
        ]
      },

      "fitness": {
        "title": "Fitness",
        "hfov": 300,
        "pitch": -20,
        "yaw": 140,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140806_00_064.jpg",
        "hotSpots": [
          {
            "yaw": 270,
            "pitch": -20,
            "type": "scene",
            "text": "Wellness",
            "sceneId": "wellness",
          }
        ]
      },


      "terrace": {
        "title": "Terrasse",
        "pitch": 0,
        "yaw": 30,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_140952_00_067.jpg",
        "hotSpots": [
          {
            "yaw": 100,
            "pitch": -5,
            "type": "scene",
            "text": "Wellness",
            "sceneId": "wellness",
          },
          {
            "yaw": 0,
            "pitch": -10,
            "type": "scene",
            "text": "Hängekorb",
            "sceneId": "terrace2",
          }
        ]
      },
      "terrace2": {
        "title": "Ausblick über dem Wasserfall",
        "pitch": 0,
        "yaw": 180,
        "type": "equirectangular",
        "panorama": "/img/IMG_20230408_141016_00_068.jpg",
        "hotSpots": [
          {
            "yaw": 50,
            "pitch": -5,
            "type": "scene",
            "text": "Terrasse",
            "sceneId": "terrace"
          }
        ]
      },
// IMG_20230408_141016_00_068
    }
  }

  function listScenes() {
    return Object.keys(scenes.scenes).sort(function(a,b){return scenes.scenes[a].title.localeCompare(scenes.scenes[b].title)});
  }

  function printScenes() {
    let html = document.getElementById("rooms").innerHTML;
    let list = listScenes();
    for (const i in list) {
      html += '<a href="./index.html?start='+ list[i] + '">' + scenes.scenes[list[i]].title + '</a></br>';
    }
      document.getElementById("rooms").innerHTML = html;
  }

  let cssRules;

  function manipulateStylesheet() {
    let stylesheet = document.styleSheets[0]; // HACK only works if there is a single stylesheet
    cssRules = stylesheet.cssRules.length
    stylesheet.insertRule("#panorama {\n" +
      "      top: 10px;\n" +
      "      left: 250px;\n" +
      "      width: " + (window.innerWidth - 250 - 20) + "px;\n" +
      "      height: " + (window.innerHeight - 30) + "px;\n" +
      "    }", cssRules);
  }

  function updateStylesheet() {
    let stylesheet = document.styleSheets[0];
    stylesheet.deleteRule(cssRules);
    manipulateStylesheet();
  }

  manipulateStylesheet();

  window.onresize = updateStylesheet();

  pannellum.viewer('panorama', scenes);
  printScenes();
</script>

</body>
</html>
